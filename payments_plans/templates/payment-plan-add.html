{% extends "base.html" %}
{% load crispy_forms_tags %}

{% block content %}
    <div class="max-w-5xl mx-auto px-6 py-8">
        <nav class="flex mb-6 text-sm font-medium">
            <ol class="inline-flex items-center space-x-1 md:space-x-3">
                <li class="inline-flex items-center">
                    <a href="{% url 'home_page' %}" class="text-gray-500 hover:text-primary transition-colors flex items-center gap-2">
                        <span class="material-symbols-outlined text-lg">home</span> Dashboard
                    </a>
                </li>
                <li class="flex items-center">
                    <span class="material-symbols-outlined text-gray-400">chevron_right</span>
                    <a href="{% url 'list_payments_plans' %}" class="ml-1 text-gray-500 hover:text-primary transition-colors">Finanse</a>
                </li>
                <li class="flex items-center">
                    <span class="material-symbols-outlined text-gray-400">chevron_right</span>
                    <span class="ml-1 text-gray-900 dark:text-white font-bold">Nowy Plan</span>
                </li>
            </ol>
        </nav>

        <div class="mb-10">
            <h1 class="text-3xl md:text-4xl font-black text-gray-900 dark:text-white uppercase tracking-tighter">Dodaj Plan Płatniczy</h1>
            <p class="text-gray-500 dark:text-gray-400 text-lg mt-2">Stwórz nową strukturę opłat za czesne lub zajęcia dodatkowe dla bieżącego roku szkolnego.</p>
        </div>

        <div class="bg-white dark:bg-[#1a2e1a] rounded-3xl shadow-2xl border border-gray-200 dark:border-gray-800 overflow-hidden">
            <div class="p-6 border-b border-gray-100 dark:border-gray-800 bg-gray-50/50 dark:bg-[#152515]">
                <h3 class="font-bold text-gray-900 dark:text-white flex items-center gap-2">
                    <span class="material-symbols-outlined text-primary">edit_document</span> Szczegóły Konfiguracji
                </h3>
            </div>

            <form method="POST" class="p-8 space-y-8">
                {% csrf_token %}
                {{ form.principal.as_hidden }}
                {{ form.is_active.as_hidden }}

                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 custom-crispy-styling">
                    <div class="md:col-span-1">{{ form.name|as_crispy_field }}</div>
                    <div class="md:col-span-1">{{ form.price|as_crispy_field }}</div>
                    <div class="md:col-span-1">{{ form.frequency|as_crispy_field }}</div>
                    <div class="md:col-span-1">{{ form.discount_info|as_crispy_field }}</div>
                    <div class="md:col-span-2">{{ form.description|as_crispy_field }}</div>
                </div>

                <div class="flex items-center justify-between pt-6 border-t border-gray-100 dark:border-gray-800">
                    <a href="{% url 'list_payments_plans' %}" class="px-6 py-3 text-gray-500 font-bold hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-colors">Anuluj</a>
                    <div class="flex gap-4">
                        <button type="submit" class="px-10 py-4 bg-primary text-white font-black rounded-2xl shadow-lg hover:scale-[1.02] active:scale-95 transition-all uppercase tracking-widest">
                            Zapisz Plan
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <style>
        .custom-crispy-styling label { font-weight: 700; color: #6b7280; text-transform: uppercase; font-size: 0.75rem; margin-bottom: 0.5rem; display: block; }
        .custom-crispy-styling input, .custom-crispy-styling textarea, .custom-crispy-styling select {
            width: 100%; border-radius: 1rem; border: 1px solid #d1d5db; padding: 0.85rem 1rem; background-color: white; transition: all 0.2s;
        }
        .custom-crispy-styling input:focus, .custom-crispy-styling select:focus { border-color: #a78bfa; ring: 2px; ring-color: #a78bfa; outline: none; }
        .dark .custom-crispy-styling input, .dark .custom-crispy-styling textarea, .dark .custom-crispy-styling select {
            background-color: #1a2e1a; border-color: #2a422a; color: white;
        }
    </style>
{% endblock %}