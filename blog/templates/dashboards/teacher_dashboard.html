
<div class="p-8 overflow-y-auto">
    <div class="max-w-7xl mx-auto">

        <header class="flex flex-wrap items-center justify-between gap-4 mb-8">
            <div class="flex flex-col gap-1">
                <h1 class="text-3xl font-black tracking-tighter uppercase">Witaj, {{ user.first_name }}! ðŸ‘‹</h1>
                <p class="text-gray-500 font-bold uppercase text-xs tracking-widest">{{ today|date:"l, d F Y" }}</p>
            </div>

            <div class="flex items-center gap-4">
                <div class="px-4 py-2 rounded-xl bg-gray-100 dark:bg-gray-800 border border-gray-200">
                    <p class="text-sm font-black text-gray-500 uppercase">{{ active_kindergarten.name }}</p>
                </div>
                <div class="px-4 py-2 rounded-xl bg-primary/10 border border-primary/20">
                    {# UÅ¼ywamy grupy przypisanej do konkretnego profilu pracownika #}
                    <p class="text-sm font-black text-primary uppercase">Grupa: {{ teacher_profile.group.name|default:"Brak" }}</p>
                </div>
            </div>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <div class="lg:col-span-2 flex flex-col gap-8">
                <section class="bg-white dark:bg-[#0f1d0f] rounded-3xl shadow-sm border border-gray-100 dark:border-gray-800">
                    <div class="flex items-center justify-between p-6 border-b border-gray-50 dark:border-gray-800">
                        <h2 class="text-xl font-black uppercase tracking-tight">Dzisiejsza ObecnoÅ›Ä‡</h2>
                        <span class="px-3 py-1 bg-gray-100 dark:bg-gray-800 rounded-lg text-xs font-black text-primary uppercase">
                            {{ stats.present }} / {{ stats.total }} Obecnych
                        </span>
                    </div>

                    <div class="p-6 space-y-4">
                        {% for kid in kids %}
                            <div class="flex items-center justify-between p-4 rounded-2xl hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-all border border-transparent hover:border-gray-100 dark:hover:border-gray-800">
                                <div class="flex items-center gap-4">
                                    <div class="size-10 rounded-full bg-primary/10 flex items-center justify-center font-black text-primary text-xs uppercase">
                                        {{ kid.first_name|slice:":1" }}
                                    </div>
                                    <p class="font-bold text-gray-900 dark:text-white">{{ kid.first_name }} {{ kid.last_name }}</p>
                                </div>

                                <div class="flex items-center gap-2">
                                    {# BezpoÅ›redni dostÄ™p do atrybutu dodanego w widoku #}
                                    <span class="px-3 py-1 text-[10px] rounded-full font-black uppercase tracking-widest
            {% if kid.today_status == 2 %} bg-green-100 text-green-700
            {% elif kid.today_status == 1 %} bg-red-100 text-red-700
            {% else %} bg-gray-100 text-gray-400 {% endif %}">

            {% if kid.today_status == 2 %}
                Obecny
            {% elif kid.today_status == 1 %}
                Nieobecny
            {% else %}
                Brak wpisu
            {% endif %}
        </span>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                </section>
            </div>

            <div class="lg:col-span-1 flex flex-col gap-8">
                <section class="bg-white dark:bg-[#0f1d0f] rounded-3xl p-8 shadow-sm border border-gray-100 dark:border-gray-800">
                    <h2 class="text-xl font-black uppercase tracking-tight mb-6">Status Grupy</h2>
                    <div class="space-y-4">
                        <div class="flex justify-between items-center">
                            <span class="text-xs font-bold text-gray-400 uppercase">Dzieci Razem</span>
                            <span class="font-black text-lg">{{ stats.total }}</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-xs font-bold text-gray-400 uppercase">ChÅ‚opcy / Dziewczynki</span>
                            <span class="font-black text-lg">{{ stats.boys }} / {{ stats.girls }}</span>
                        </div>
                        <a href="{% url 'presence_calendar' %}" class="block w-full mt-6 py-3 px-4 rounded-2xl bg-primary text-white text-center font-black uppercase text-xs tracking-widest shadow-xl shadow-primary/20 hover:scale-105 transition-all">
                            PeÅ‚na Lista ObecnoÅ›ci
                        </a>
                    </div>
                </section>

                <section class="bg-white dark:bg-[#0f1d0f] rounded-3xl p-8 shadow-sm border border-gray-100 dark:border-gray-800">
                    <h2 class="text-xl font-black uppercase tracking-tight mb-6">NadchodzÄ…ce</h2>
                    <div class="space-y-6">
                        {% for event in upcoming_events %}
                            <div class="flex items-start gap-4 group">
                                <div class="p-3 bg-primary/10 rounded-2xl text-primary group-hover:bg-primary group-hover:text-white transition-all">
                                    <span class="material-symbols-outlined">event</span>
                                </div>
                                <div>
                                    <p class="font-bold text-gray-900 dark:text-white">{{ event.title }}</p>
                                    <p class="text-[10px] font-black text-gray-400 uppercase tracking-tighter">{{ event.event_date|date:"d.m.Y" }}</p>
                                </div>
                            </div>
                        {% empty %}
                            <p class="text-sm text-gray-400 italic">Brak planowanych wydarzeÅ„.</p>
                        {% endfor %}
                    </div>
                </section>
            </div>
        </div>
    </div>
</div>