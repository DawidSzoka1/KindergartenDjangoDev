{% load static %}
<div class="relative flex min-h-screen w-full flex-col group/design-root">
    <div class="flex h-full w-full">
        <main class="flex-1 flex flex-col">
            <header class="flex items-center justify-between whitespace-nowrap border-b border-solid border-border-light dark:border-border-dark px-10 py-4 bg-card-light dark:bg-card-dark sticky top-0 z-10">
                <div class="flex items-center gap-4">
                    <h2 class="text-text-light dark:text-text-dark text-xl font-black tracking-tighter uppercase">
                        {{ active_kindergarten.name|default:"Panel Dyrektora" }}
                    </h2>
                </div>
                <div class="flex items-center gap-4">
                    <div class="flex flex-col items-end">
                        <p class="text-sm font-bold text-primary">{{ today|date:"l" }}</p>
                        <p class="text-xs text-text-light/50 dark:text-text-dark/50">{{ today|date:"d F Y" }}</p>
                    </div>
                    <div class="bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10 border-2 border-primary/20" style='background-image: url("{% static 'DYREKTOR.jpg' %}");'></div>
                </div>
            </header>

            <div class="flex-1 p-10 overflow-y-auto">
                <div class="flex flex-col gap-8">

                    <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4">
                        <a href="{% url 'add_group' %}" class="flex flex-col items-center justify-center gap-2 p-4 bg-card-light dark:bg-card-dark rounded-2xl border border-border-light dark:border-border-dark hover:border-primary hover:shadow-xl transition-all h-28 group">
                            <span class="material-symbols-outlined text-primary group-hover:scale-110 transition-transform">group_add</span>
                            <span class="text-xs font-black uppercase">Grupa</span>
                        </a>
                        <a href="{% url 'add_teacher' %}" class="flex flex-col items-center justify-center gap-2 p-4 bg-card-light dark:bg-card-dark rounded-2xl border border-border-light dark:border-border-dark hover:border-primary hover:shadow-xl transition-all h-28 group">
                            <span class="material-symbols-outlined text-primary group-hover:scale-110 transition-transform">school</span>
                            <span class="text-xs font-black uppercase">Nauczyciel</span>
                        </a>
                        <a href="{% url 'invite_standalone_parent' %}" class="flex flex-col items-center justify-center gap-2 p-4 bg-card-light dark:bg-card-dark rounded-2xl border border-border-light dark:border-border-dark hover:border-primary hover:shadow-xl transition-all h-28 group">
                            <span class="material-symbols-outlined text-primary group-hover:scale-110 transition-transform">person_add</span>
                            <span class="text-xs font-black uppercase">Rodzic</span>
                        </a>
                        <a href="{% url 'add_kid' %}" class="flex flex-col items-center justify-center gap-2 p-4 bg-card-light dark:bg-card-dark rounded-2xl border border-border-light dark:border-border-dark hover:border-primary hover:shadow-xl transition-all h-28 group">
                            <span class="material-symbols-outlined text-primary group-hover:scale-110 transition-transform">child_care</span>
                            <span class="text-xs font-black uppercase">Dziecko</span>
                        </a>
                        <a href="{% url 'post_list_view' %}" class="flex flex-col items-center justify-center gap-2 p-4 bg-card-light dark:bg-card-dark rounded-2xl border border-border-light dark:border-border-dark hover:border-primary hover:shadow-xl transition-all h-28 group">
                            <span class="material-symbols-outlined text-primary group-hover:scale-110 transition-transform">campaign</span>
                            <span class="text-xs font-black uppercase">Ogłoszenie</span>
                        </a>
                        <a href="{% url 'contact-update' active_profile_id %}" class="flex flex-col items-center justify-center gap-2 p-4 bg-card-light dark:bg-card-dark rounded-2xl border border-border-light dark:border-border-dark hover:border-primary hover:shadow-xl transition-all h-28 group">
                            <span class="material-symbols-outlined text-primary group-hover:scale-110 transition-transform">settings</span>
                            <span class="text-xs font-black uppercase">Ustawienia</span>
                        </a>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                        <div class="lg:col-span-2 flex flex-col gap-6">
                            <div class="bg-card-light dark:bg-card-dark p-8 rounded-3xl border border-border-light dark:border-border-dark shadow-sm">
                                <div class="flex justify-between items-end mb-6">
                                    <h3 class="font-black uppercase tracking-tighter text-xl">Przegląd Placówki</h3>
                                    <span class="text-[10px] font-black bg-primary/20 text-primary px-2 py-1 rounded-md uppercase">Live dzisiaj</span>
                                </div>
                                <div class="grid grid-cols-1 sm:grid-cols-3 gap-6">
                                    <div class="p-6 bg-background-light dark:bg-background-dark rounded-2xl border border-gray-100 dark:border-gray-800">
                                        <p class="text-sm font-bold text-gray-400 uppercase mb-1">Dzieci</p>
                                        <div class="flex items-end gap-2">
                                            <p class="text-4xl font-black text-primary">{{ kids_count }}</p>
                                            <p class="text-xs font-bold text-gray-500 pb-1">/ {{ total_capacity|default:"100" }}</p>
                                        </div>
                                        <div class="w-full bg-gray-200 dark:bg-gray-700 h-1.5 rounded-full mt-4">
                                            <div class="bg-primary h-1.5 rounded-full" style="width: {{ occupancy_rate|default:'75' }}%"></div>
                                        </div>
                                    </div>
                                    <div class="p-6 bg-background-light dark:bg-background-dark rounded-2xl border border-gray-100 dark:border-gray-800">
                                        <p class="text-sm font-bold text-gray-400 uppercase mb-1">Obecni</p>
                                        <p class="text-4xl font-black text-blue-500">{{ kids_presence_count|default:"0" }}</p>
                                        <p class="text-[10px] text-gray-500 font-bold mt-2 uppercase">Status na teraz</p>
                                    </div>
                                    <div class="p-6 bg-background-light dark:bg-background-dark rounded-2xl border border-gray-100 dark:border-gray-800">
                                        <p class="text-sm font-bold text-gray-400 uppercase mb-1">Kadra</p>
                                        <p class="text-4xl font-black text-orange-500">{{ teachers_count }}</p>
                                        <p class="text-[10px] text-gray-500 font-bold mt-2 uppercase">Aktywni nauczyciele</p>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-card-light dark:bg-card-dark p-8 rounded-3xl border border-border-light dark:border-border-dark shadow-sm">
                                <h3 class="font-black uppercase tracking-tighter text-xl mb-6">Ostatnia Aktywność</h3>
                                <div class="space-y-4">
                                    {% for post in recent_announcements %}
                                        <div class="flex items-center justify-between p-4 bg-background-light dark:bg-background-dark rounded-2xl">
                                            <div class="flex items-center gap-4">
                                                <div class="p-2 bg-primary/10 rounded-lg text-primary">
                                                    <span class="material-symbols-outlined text-sm">campaign</span>
                                                </div>
                                                <div>
                                                    <p class="text-sm font-bold">{{ post.title }}</p>
                                                    <p class="text-[10px] text-gray-500">{{ post.date_posted|timesince }} temu</p>
                                                </div>
                                            </div>
                                            <a href="{% url 'post_detail' pk=post.id %}" class="text-xs font-black text-primary uppercase">Zobacz</a>
                                        </div>
                                    {% empty %}
                                        <p class="text-sm text-gray-500 text-center py-4 italic">Brak nowych ogłoszeń.</p>
                                    {% endfor %}
                                </div>
                            </div>
                        </div>

                        <div class="flex flex-col gap-6">
                            <div class="bg-card-light dark:bg-card-dark p-8 rounded-3xl border border-border-light dark:border-border-dark shadow-sm h-full">
                                <h3 class="font-black uppercase tracking-tighter text-xl mb-6">Podsumowanie Grup</h3>
                                <div class="space-y-6">
                                    {% for group in groups_summary %}
                                        <div class="space-y-2">
                                            <div class="flex justify-between text-xs font-black uppercase">
                                                <span>{{ group.name }}</span>
                                                <span class="text-primary">{{ group.kid_count }} os.</span>
                                            </div>
                                            <div class="w-full bg-gray-100 dark:bg-gray-800 h-2 rounded-full overflow-hidden">
                                                <div class="bg-primary h-full" style="width: {{ group.capacity_percent }}%"></div>
                                            </div>
                                        </div>
                                    {% endfor %}
                                    <a href="{% url 'list_groups' %}" class="mt-4 block text-center py-4 bg-gray-50 dark:bg-gray-800 rounded-2xl text-[10px] font-black uppercase hover:bg-primary hover:text-white transition-all">
                                        Zarządzaj Wszystkimi Grupami
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>